<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Deriv Trade â€” Fresh Build</title>
  <style>
    body{margin:0;font-family:Arial;background:#000;color:#fff}
    header{padding:16px;background:#111;border-bottom:2px solid #e30613;display:flex;justify-content:space-between;align-items:center}
    h1{margin:0;color:#e30613}

    .container{padding:16px;max-width:1200px;margin:auto}

    /* Demo account */
    .demo-box{background:#0d0d0d;padding:16px;border-radius:10px;margin-bottom:20px;border:1px solid #222}
    input, select{width:100%;padding:10px;margin-top:8px;background:#111;border:1px solid #333;color:#fff;border-radius:6px}
    button{padding:10px 16px;border:none;border-radius:6px;background:#e30613;color:#fff;cursor:pointer;font-weight:bold}

    /* Chart */
    canvas{background:#111;border-radius:10px;margin-top:20px;padding:10px}
  </style>
  <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
</head>
<body>

<header>
  <h1>Deriv Trade</h1>
  <button onclick="resetDemo()">Reset Demo</button>
</header>

<div class="container">
  <div class="demo-box">
    <h2>Demo Trading Account</h2>
    <p>Balance: <strong id="balance">KES 100,000</strong></p>

    <label>Select Currency Pair</label>
    <select id="pair">
      <option value="EURUSD">EUR/USD</option>
      <option value="GBPUSD">GBP/USD</option>
      <option value="USDJPY">USD/JPY</option>
      <option value="XAUUSD">XAU/USD</option>
    </select>

    <label>Amount to Trade</label>
    <input id="amount" type="number" placeholder="Enter amount" />

    <button onclick="placeTrade()">Place Trade</button>

    <div id="tradeMsg" style="margin-top:10px;color:#0f0"></div>
  </div>

  <h2>Live Candles Chart</h2>
  <canvas id="chart" height="300"></canvas>
</div>

<script>
let bal = 100000;
let ctx = document.getElementById('chart');
let prices = [1.1000, 1.1010, 1.0995, 1.1008];

let chart = new Chart(ctx, {
  type: 'candlestick',
  data: {datasets: [{label: 'Market', data: []}]},
});

function updateChart(){
  const last = prices[prices.length-1];
  const next = last + (Math.random() - 0.5) * 0.002;
  prices.push(next);

  chart.data.datasets[0].data.push({
    o:last,
    h:last + Math.random()*0.001,
    l:last - Math.random()*0.001,
    c:next
  });
  chart.update();
}
setInterval(updateChart, 2000);

function placeTrade(){
  let amt = parseFloat(document.getElementById('amount').value);
  if(isNaN(amt) || amt<=0){
    document.getElementById('tradeMsg').innerText='Enter a valid amount';
    return;
  }

  if(amt>bal){
    document.getElementById('tradeMsg').innerText='Not enough balance';
    return;
  }

  bal -= amt;
  document.getElementById('balance').innerText = 'KES ' + bal;
  document.getElementById('tradeMsg').innerText='Trade placed successfully!';
}

function resetDemo(){
  bal = 100000;
  document.getElementById('balance').innerText = 'KES '+bal;
  document.getElementById('tradeMsg').innerText='Demo reset.';
}
</script>

</body>
</html>
